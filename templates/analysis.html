<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Analiz - Finansal Veri Analiz</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .navbar {
            background: rgba(255, 255, 255, 0.1) !important;
            backdrop-filter: blur(10px);
        }
        .card {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: none;
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        .btn-primary {
            background: linear-gradient(45deg, #667eea, #764ba2);
            border: none;
            border-radius: 25px;
            padding: 10px 25px;
            font-weight: 600;
        }
        .analysis-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 2rem;
            margin: 1rem 0;
            color: white;
        }
        .chart-container {
            position: relative;
            height: 400px;
            margin: 1rem 0;
        }
        .footer {
            background: rgba(0, 0, 0, 0.1);
            color: white;
            padding: 2rem 0;
            margin-top: 3rem;
        }
        .signal-badge {
            font-size: 1rem;
            padding: 0.8rem 1.5rem;
            border-radius: 25px;
            margin: 0.5rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
            transition: all 0.3s ease;
            display: inline-block;
            min-width: 120px;
            text-align: center;
        }
        .signal-badge:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
        }
        .signal-buy { 
            background: linear-gradient(45deg, #28a745, #20c997); 
            color: white; 
            border: 2px solid #1e7e34;
        }
        .signal-sell { 
            background: linear-gradient(45deg, #dc3545, #e74c3c); 
            color: white; 
            border: 2px solid #c82333;
        }
        .signal-hold { 
            background: linear-gradient(45deg, #ffc107, #ffb347); 
            color: #212529; 
            border: 2px solid #e0a800;
        }
        
        /* Trading Signals Card Styling */
        .trading-signals-card {
            background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
            border: 2px solid #e9ecef;
        }
        
        .signal-section {
            padding: 1.5rem;
            border-radius: 15px;
            margin: 1rem 0;
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
        }
        
        .signal-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #495057;
            margin-bottom: 1rem;
            text-align: center;
            border-bottom: 2px solid #e9ecef;
            padding-bottom: 0.5rem;
        }
        
        .main-signal {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 2rem;
            border-radius: 20px;
            text-align: center;
            margin: 1.5rem 0;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }
        
        .main-signal h4 {
            font-size: 1.3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container">
            <a class="navbar-brand fw-bold" href="/">
                <i class="fas fa-chart-line me-2"></i>Finansal Analiz
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="/">Ana Sayfa</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/dashboard">Dashboard</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="/analysis">Analiz</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="/about">Hakkında</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Page Header -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body text-center">
                        <h1 class="display-5 fw-bold text-primary">
                            <i class="fas fa-chart-bar me-3"></i>Detaylı Finansal Analiz
                        </h1>
                        <p class="lead">Gelişmiş teknik analiz araçları ile yatırım kararlarınızı destekleyin</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Controls -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-cog me-2"></i>Analiz Parametreleri
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="stockSelect" class="form-label">Hisse Senedi:</label>
                                <select class="form-select" id="stockSelect">
                                    {% for kod, sembol in hisseler.items() %}
                                    <option value="{{ sembol }}">{{ kod }} - {{ sembol }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="periodSelect" class="form-label">Veri Aralığı:</label>
                                <select class="form-select" id="periodSelect">
                                    <option value="1mo">1 Ay</option>
                                    <option value="3mo" selected>3 Ay</option>
                                    <option value="6mo">6 Ay</option>
                                    <option value="1y">1 Yıl</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label class="form-label">&nbsp;</label>
                                <button class="btn btn-primary w-100" onclick="runAnalysis()">
                                    <i class="fas fa-play me-2"></i>Analizi Başlat
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analysis Results -->
        <div class="row">
            <!-- Technical Indicators -->
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-line me-2"></i>Teknik Göstergeler
                        </h5>
                    </div>
                    <div class="card-body" id="technicalIndicators">
                        <p class="text-muted">Analizi başlatmak için yukarıdaki butona tıklayın.</p>
                    </div>
                </div>
            </div>

            <!-- Trading Signals -->
            <div class="col-md-6 mb-4">
                <div class="card trading-signals-card">
                    <div class="card-header bg-warning text-dark">
                        <h5 class="mb-0">
                            <i class="fas fa-signal me-2"></i>Alım-Satım Sinyalleri
                        </h5>
                    </div>
                    <div class="card-body" id="tradingSignals">
                        <p class="text-muted">Analizi başlatmak için yukarıdaki butona tıklayın.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Charts Row -->
        <div class="row mb-4">
            <div class="col-md-8">
                <div class="card">
                    <div class="card-header bg-info text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-area me-2"></i>Fiyat ve Teknik Göstergeler
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="analysisChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card">
                    <div class="card-header bg-secondary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-chart-pie me-2"></i>RSI ve Momentum
                        </h5>
                    </div>
                    <div class="card-body">
                        <div class="chart-container">
                            <canvas id="rsiChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Risk Analysis -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-dark text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-shield-alt me-2"></i>Risk Analizi ve Öneriler
                        </h5>
                    </div>
                    <div class="card-body" id="riskAnalysis">
                        <p class="text-muted">Analizi başlatmak için yukarıdaki butona tıklayın.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Market Sentiment -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-header bg-primary text-white">
                        <h5 class="mb-0">
                            <i class="fas fa-brain me-2"></i>Piyasa Duyarlılığı ve Trend Analizi
                        </h5>
                    </div>
                    <div class="card-body" id="marketSentiment">
                        <p class="text-muted">Analizi başlatmak için yukarıdaki butona tıklayın.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <p>&copy; 2025 Finansal Veri Analiz Platformu. Geliştiren: Hüseyin Erol</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        let analysisChart = null;
        let rsiChart = null;

        function runAnalysis() {
            const symbol = document.getElementById('stockSelect').value;
            const period = document.getElementById('periodSelect').value;
            
            // Loading göster
            document.getElementById('technicalIndicators').innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i><p>Analiz yapılıyor...</p></div>';
            document.getElementById('tradingSignals').innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i><p>Sinyaller hesaplanıyor...</p></div>';
            document.getElementById('riskAnalysis').innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i><p>Risk analizi yapılıyor...</p></div>';
            document.getElementById('marketSentiment').innerHTML = '<div class="text-center"><i class="fas fa-spinner fa-spin fa-2x"></i><p>Piyasa duyarlılığı analiz ediliyor...</p></div>';
            
            // Teknik analiz verisi yükle
            fetch(`/api/technical_analysis?symbol=${symbol}&period=${period}`)
                .then(response => response.json())
                .then(data => {
                    if (data.success) {
                        updateAnalysis(data);
                    } else {
                        showError('technicalIndicators', data.error);
                    }
                })
                .catch(error => {
                    showError('technicalIndicators', error);
                });
        }

        function updateAnalysis(data) {
            // Teknik göstergeler
            updateTechnicalIndicators(data);
            
            // Alım-satım sinyalleri
            updateTradingSignals(data);
            
            // Risk analizi
            updateRiskAnalysis(data);
            
            // Piyasa duyarlılığı
            updateMarketSentiment(data);
            
            // Grafikleri güncelle
            updateAnalysisChart(data);
            updateRSIChart(data);
        }

        function updateTechnicalIndicators(data) {
            const currentPrice = data.current_price;
            const currentRsi = data.current_rsi;
            const currentMa20 = data.current_ma20;
            const currentMa50 = data.current_ma50;
            
            document.getElementById('technicalIndicators').innerHTML = `
                <div class="row">
                    <div class="col-6">
                        <h6>Fiyat Göstergeleri</h6>
                        <p><strong>Mevcut Fiyat:</strong> ${currentPrice} TL</p>
                        <p><strong>20 Günlük MA:</strong> ${currentMa20.toFixed(2)} TL</p>
                        <p><strong>50 Günlük MA:</strong> ${currentMa50.toFixed(2)} TL</p>
                    </div>
                    <div class="col-6">
                        <h6>Teknik Göstergeler</h6>
                        <p><strong>RSI (14):</strong> ${currentRsi.toFixed(2)}</p>
                        <p><strong>Fiyat/MA20:</strong> ${(currentPrice / currentMa20 * 100 - 100).toFixed(2)}%</p>
                        <p><strong>Fiyat/MA50:</strong> ${(currentPrice / currentMa50 * 100 - 100).toFixed(2)}%</p>
                    </div>
                </div>
            `;
        }

        function updateTradingSignals(data) {
            const currentPrice = data.current_price;
            const currentRsi = data.current_rsi;
            const currentMa20 = data.current_ma20;
            const currentMa50 = data.current_ma50;
            
            let rsiSignal = '';
            let trendSignal = '';
            let overallSignal = '';
            
            // RSI sinyali
            if (currentRsi > 70) {
                rsiSignal = '<span class="signal-badge signal-sell">Aşırı Alım - Sat</span>';
            } else if (currentRsi < 30) {
                rsiSignal = '<span class="signal-badge signal-buy">Aşırı Satım - Al</span>';
            } else {
                rsiSignal = '<span class="signal-badge signal-hold">Nötr - Bekle</span>';
            }
            
            // Trend sinyali
            if (currentPrice > currentMa20 && currentMa20 > currentMa50) {
                trendSignal = '<span class="signal-badge signal-buy">Yükseliş Trendi</span>';
            } else if (currentPrice < currentMa20 && currentMa20 < currentMa50) {
                trendSignal = '<span class="signal-badge signal-sell">Düşüş Trendi</span>';
            } else {
                trendSignal = '<span class="signal-badge signal-hold">Yatay Trend</span>';
            }
            
            // Genel sinyal
            if ((currentRsi < 30 && currentPrice > currentMa20) || 
                (currentPrice > currentMa20 && currentMa20 > currentMa50 && currentRsi < 60)) {
                overallSignal = '<span class="signal-badge signal-buy">GÜÇLÜ ALIM</span>';
            } else if ((currentRsi > 70 && currentPrice < currentMa20) || 
                       (currentPrice < currentMa20 && currentMa20 < currentMa50 && currentRsi > 40)) {
                overallSignal = '<span class="signal-badge signal-sell">GÜÇLÜ SATIM</span>';
            } else {
                overallSignal = '<span class="signal-badge signal-hold">BEKLE</span>';
            }
            
            document.getElementById('tradingSignals').innerHTML = `
                <div class="main-signal">
                    <h4><i class="fas fa-star me-2"></i>Genel Sinyal</h4>
                    <div class="mb-3">${overallSignal}</div>
                </div>
                
                <div class="row">
                    <div class="col-6">
                        <div class="signal-section">
                            <div class="signal-title">
                                <i class="fas fa-chart-line me-2"></i>RSI Sinyali
                            </div>
                            <div class="text-center">${rsiSignal}</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="signal-section">
                            <div class="signal-title">
                                <i class="fas fa-trending-up me-2"></i>Trend Sinyali
                            </div>
                            <div class="text-center">${trendSignal}</div>
                        </div>
                    </div>
                </div>
            `;
        }

        function updateRiskAnalysis(data) {
            const currentPrice = data.current_price;
            const currentRsi = data.current_rsi;
            const currentMa20 = data.current_ma20;
            const currentMa50 = data.current_ma50;
            
            let riskLevel = '';
            let riskDescription = '';
            let recommendations = [];
            
            // Risk seviyesi hesapla
            let riskScore = 0;
            
            if (currentRsi > 70) riskScore += 3;
            else if (currentRsi < 30) riskScore += 1;
            else riskScore += 2;
            
            if (Math.abs(currentPrice / currentMa20 - 1) > 0.1) riskScore += 2;
            if (Math.abs(currentPrice / currentMa50 - 1) > 0.2) riskScore += 2;
            
            if (riskScore <= 3) {
                riskLevel = '<span class="badge bg-success">DÜŞÜK RİSK</span>';
                riskDescription = 'Hisse senedi stabil durumda, risk düşük.';
                recommendations = ['Uzun vadeli yatırım yapılabilir', 'Stop-loss seviyesi belirleyin'];
            } else if (riskScore <= 5) {
                riskLevel = '<span class="badge bg-warning">ORTA RİSK</span>';
                riskDescription = 'Hisse senedi orta risk seviyesinde.';
                recommendations = ['Dikkatli olun', 'Küçük pozisyonlarla işlem yapın'];
            } else {
                riskLevel = '<span class="badge bg-danger">YÜKSEK RİSK</span>';
                riskDescription = 'Hisse senedi yüksek risk seviyesinde!';
                recommendations = ['İşlem yapmayın', 'Mevcut pozisyonları gözden geçirin'];
            }
            
            document.getElementById('riskAnalysis').innerHTML = `
                <div class="row">
                    <div class="col-md-4 text-center">
                        <h6>Risk Seviyesi</h6>
                        <div class="mb-3">${riskLevel}</div>
                        <p class="small">${riskDescription}</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Risk Faktörleri</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-circle text-${currentRsi > 70 ? 'danger' : currentRsi < 30 ? 'success' : 'warning'} me-2"></i>RSI: ${currentRsi.toFixed(2)}</li>
                            <li><i class="fas fa-circle text-${Math.abs(currentPrice / currentMa20 - 1) > 0.1 ? 'warning' : 'success'} me-2"></i>MA20 Sapması: ${(currentPrice / currentMa20 * 100 - 100).toFixed(2)}%</li>
                            <li><i class="fas fa-circle text-${Math.abs(currentPrice / currentMa50 - 1) > 0.2 ? 'warning' : 'success'} me-2"></i>MA50 Sapması: ${(currentPrice / currentMa50 * 100 - 100).toFixed(2)}%</li>
                        </ul>
                    </div>
                    <div class="col-md-4">
                        <h6>Öneriler</h6>
                        <ul class="list-unstyled">
                            ${recommendations.map(rec => `<li><i class="fas fa-check text-success me-2"></i>${rec}</li>`).join('')}
                        </ul>
                    </div>
                </div>
            `;
        }

        function updateMarketSentiment(data) {
            const currentPrice = data.current_price;
            const currentRsi = data.current_rsi;
            const currentMa20 = data.current_ma20;
            const currentMa50 = data.current_ma50;
            
            let sentiment = '';
            let confidence = '';
            let trendStrength = '';
            
            // Piyasa duyarlılığı
            if (currentPrice > currentMa20 && currentMa20 > currentMa50 && currentRsi < 60) {
                sentiment = '<span class="badge bg-success">BULLISH (Yükseliş)</span>';
                confidence = 'Yüksek';
            } else if (currentPrice < currentMa20 && currentMa20 < currentMa50 && currentRsi > 40) {
                sentiment = '<span class="badge bg-danger">BEARISH (Düşüş)</span>';
                confidence = 'Yüksek';
            } else {
                sentiment = '<span class="badge bg-warning">NEUTRAL (Nötr)</span>';
                confidence = 'Düşük';
            }
            
            // Trend gücü
            const ma20Slope = (currentMa20 - data.ma20[data.ma20.length - 10]) / 10;
            const ma50Slope = (currentMa50 - data.ma50[data.ma50.length - 10]) / 10;
            
            if (Math.abs(ma20Slope) > 0.5 && Math.abs(ma50Slope) > 0.3) {
                trendStrength = '<span class="badge bg-success">GÜÇLÜ</span>';
            } else if (Math.abs(ma20Slope) > 0.2 && Math.abs(ma50Slope) > 0.1) {
                trendStrength = '<span class="badge bg-warning">ORTA</span>';
            } else {
                trendStrength = '<span class="badge bg-secondary">ZAYIF</span>';
            }
            
            document.getElementById('marketSentiment').innerHTML = `
                <div class="row">
                    <div class="col-md-4 text-center">
                        <h6>Piyasa Duyarlılığı</h6>
                        <div class="mb-3">${sentiment}</div>
                        <p class="small">Güven: ${confidence}</p>
                    </div>
                    <div class="col-md-4 text-center">
                        <h6>Trend Gücü</h6>
                        <div class="mb-3">${trendStrength}</div>
                        <p class="small">MA20 Eğimi: ${ma20Slope.toFixed(3)}</p>
                    </div>
                    <div class="col-md-4">
                        <h6>Teknik Durum</h6>
                        <ul class="list-unstyled">
                            <li><i class="fas fa-arrow-${currentPrice > currentMa20 ? 'up text-success' : 'down text-danger'} me-2"></i>Fiyat MA20: ${currentPrice > currentMa20 ? 'Üstünde' : 'Altında'}</li>
                            <li><i class="fas fa-arrow-${currentMa20 > currentMa50 ? 'up text-success' : 'down text-danger'} me-2"></i>MA20 MA50: ${currentMa20 > currentMa50 ? 'Üstünde' : 'Altında'}</li>
                            <li><i class="fas fa-circle text-${currentRsi > 70 ? 'danger' : currentRsi < 30 ? 'success' : 'warning'} me-2"></i>RSI Durumu: ${currentRsi > 70 ? 'Aşırı Alım' : currentRsi < 30 ? 'Aşırı Satım' : 'Normal'}</li>
                        </ul>
                    </div>
                </div>
            `;
        }

        function updateAnalysisChart(data) {
            const ctx = document.getElementById('analysisChart').getContext('2d');
            
            if (analysisChart) {
                analysisChart.destroy();
            }
            
            analysisChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.dates,
                    datasets: [{
                        label: 'Kapanış Fiyatı',
                        data: data.close,
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.1
                    }, {
                        label: '20 Günlük MA',
                        data: data.ma20,
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.1
                    }, {
                        label: '50 Günlük MA',
                        data: data.ma50,
                        borderColor: '#36a2eb',
                        backgroundColor: 'rgba(54, 162, 235, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'Bollinger Üst',
                        data: data.upper_band,
                        borderColor: '#ffcd56',
                        backgroundColor: 'rgba(255, 205, 86, 0.1)',
                        tension: 0.1
                    }, {
                        label: 'Bollinger Alt',
                        data: data.lower_band,
                        borderColor: '#4bc0c0',
                        backgroundColor: 'rgba(75, 192, 192, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'Fiyat ve Teknik Göstergeler'
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false
                        }
                    }
                }
            });
        }

        function updateRSIChart(data) {
            const ctx = document.getElementById('rsiChart').getContext('2d');
            
            if (rsiChart) {
                rsiChart.destroy();
            }
            
            rsiChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: data.dates,
                    datasets: [{
                        label: 'RSI (14)',
                        data: data.rsi,
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.1)',
                        tension: 0.1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        title: {
                            display: true,
                            text: 'RSI ve Momentum'
                        }
                    },
                    scales: {
                        y: {
                            min: 0,
                            max: 100
                        }
                    }
                }
            });
        }

        function showError(elementId, error) {
            document.getElementById(elementId).innerHTML = `<div class="alert alert-danger">Hata: ${error}</div>`;
        }

        // Sayfa yüklendiğinde varsayılan analizi çalıştır
        document.addEventListener('DOMContentLoaded', function() {
            // Sayfa yüklendikten 1 saniye sonra otomatik analiz başlat
            setTimeout(runAnalysis, 1000);
        });
    </script>
</body>
</html>
